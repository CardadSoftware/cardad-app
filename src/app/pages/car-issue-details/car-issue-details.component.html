<div class="car-issue-details">
  <ng-container *ngIf="vehicleModel && userModel">
    <h1>Car Issue Details</h1>
    <div class="car-details">
      <h2>{{ vehicleModel.name }}</h2>
      <p><strong>Year:</strong> {{ vehicleModel.year }}</p>
      <p><strong>Price:</strong> {{ vehicleModel.price | currency }}</p>
      <p><strong>User:</strong> {{ userModel.firstName + ',' + userModel.lastName}}</p>
    </div>

    <div class="issue-form">
      <form [formGroup]="issueForm" (ngSubmit)="submitIssue()">
        <div>
          <label for="issueDescription">Issue Description</label>
          <textarea id="issueDescription" formControlName="issueDescription" rows="4"></textarea>
          <div *ngIf="issueForm.get('issueDescription')?.invalid && issueForm.get('issueDescription')?.touched">
            <small>Description is required and must be at least 10 characters.</small>
          </div>
        </div>

        <div>
          <label for="urgency">Urgency</label>
          <select id="urgency" formControlName="urgency">
            <option value="" disabled>Select urgency</option>
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
          <div *ngIf="issueForm.get('urgency')?.invalid && issueForm.get('urgency')?.touched">
            <small>Urgency is required.</small>
          </div>
        </div>

        <div>
          <label for="preferredDate">Preferred Date</label>
          <input type="date" id="preferredDate" formControlName="preferredDate" />
          <div *ngIf="issueForm.get('preferredDate')?.invalid && issueForm.get('preferredDate')?.touched">
            <small>Preferred date is required.</small>
          </div>
        </div>

        <div>
          <label for="additionalNotes">Additional Notes</label>
          <textarea id="additionalNotes" formControlName="additionalNotes" rows="3"></textarea>
        </div>

        <button type="submit" [disabled]="issueForm.invalid">Submit</button>
      </form>
    </div>
  <h2>Report an Issue for {{ vehicleModel.name }}</h2>
  <form [formGroup]="issueForm" (ngSubmit)="submitIssue()">
    <div>
      <label for="issueDescription">Issue Description</label>
      <textarea id="issueDescription" formControlName="issueDescription" rows="4"></textarea>
      <div *ngIf="issueForm.get('issueDescription')?.invalid && issueForm.get('issueDescription')?.touched">
        <small>Description is required and must be at least 10 characters.</small>
      </div>
    </div>

    <div>
      <label for="urgency">Urgency</label>
      <select id="urgency" formControlName="urgency">
        <option value="" disabled>Select urgency</option>
        <option value="low">Low</option>
        <option value="medium">Medium</option>
        <option value="high">High</option>
      </select>
      <div *ngIf="issueForm.get('urgency')?.invalid && issueForm.get('urgency')?.touched">
        <small>Urgency is required.</small>
      </div>
    </div>

    <div>
      <label for="preferredDate">Preferred Date</label>
      <input type="date" id="preferredDate" formControlName="preferredDate" />
      <div *ngIf="issueForm.get('preferredDate')?.invalid && issueForm.get('preferredDate')?.touched">
        <small>Preferred date is required.</small>
      </div>
    </div>

    <div>
      <label for="additionalNotes">Additional Notes</label>
      <textarea id="additionalNotes" formControlName="additionalNotes" rows="3"></textarea>
    </div>

    <button type="submit" [disabled]="issueForm.invalid">Submit</button>
  </form>
</ng-container>
</div>
